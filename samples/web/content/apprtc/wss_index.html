<!DOCTYPE html>
<!--
 *  Copyright (c) 2014 The WebRTC project authors. All Rights Reserved.
 *
 *  Use of this source code is governed by a BSD-style license
 *  that can be found in the LICENSE file in the root of the source
 *  tree.
-->
<html>

<head>

  <title>WebRTC Reference App</title>

  <meta charset="utf-8">
  <meta name="description" content="WebRTC reference app">
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  {{ meta_viewport }}

  <link rel="canonical" href="{{ room_link }}">
  <link rel="stylesheet" href="css/main.css">

</head>

<script type="text/javascript">
  var config = {
    errorMessages: {{ error_messages }},

    roomId: '{{ room_key }}',
    roomLink: '{{ room_link }}',
    clientId: '{{ me }}',

    turnUrl: '{{ turn_url }}',
    peerConnectionConfig: {{ pc_config | safe }},
    peerConnectionConstraints: {{ pc_constraints | safe }},
    offerConstraints: {{ offer_constraints | safe }},
    mediaConstraints: {{ media_constraints | safe }},
    messages: {{ saved_messages }},

    wss: '{{ wss }}',
    wss_tls: {{ wss_tls }},

    stereo: {{ stereo }},
    opusfec: {{ opusfec }},
    opusMaxPbr: '{{ opusmaxpbr }}',
    audioSendBitrate: '{{ asbr }}',
    audioRecvBitrate: '{{ arbr }}',
    videoSendBitrate: '{{ vsbr }}',
    videoRecvBitrate: '{{ vrbr }}',
    videoSendInitialBitrate: '{{ vsibr }}',
    stereoscopic: '{{ ssr }}',
    audioSendCodec: '{{ audio_send_codec }}',
    audioRecvCodec: '{{ audio_receive_codec }}',
  };

  var app = null;
  document.addEventListener('DOMContentLoaded', function() {
    app = new apprtc.App();
  });

  window.addEventListener('beforeunload', function() {
    app.shutdown();
  });
</script>

<!-- Load the polyfill to switch-hit between Chrome and Firefox -->
<script src="/js/adapter.js"></script>
{{ include_vr_js }}
<script src="/js/logging.js"></script>
<script src="/js/pubsub.js"></script>
<script src="/js/util.js"></script>
<script src="/js/signaling.js"></script>
<script src="/js/stats.js"></script>
<script src="/js/infobox.js"></script>
<script src="/js/apprtc.js"></script>

<body>

<div id="container">
  <div id="card">
    <div id="local">
      <video id="localVideo" autoplay="autoplay" muted></video>
    </div>
    <div id="remote">
      <!-- Remote video is displayed in the canvas below when stereoscopic
          rendering is requested (&ssr=true). -->
      <canvas id="remoteCanvas" style="display: none;"></canvas>
      <video id="remoteVideo" autoplay="autoplay"></video>
      <div id="mini">
        <video id="miniVideo" autoplay="autoplay" muted></video>
      </div>
    </div>
  </div>
</div>

<footer id="status"></footer>

<div id="infoDiv"></div>

</body>
</html>
